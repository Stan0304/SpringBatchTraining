package sopra.springbatch.training1.part1.item.reader;

import org.springframework.batch.item.ExecutionContext;
import org.springframework.batch.item.ItemReader;
import org.springframework.batch.item.ItemStream;
import org.springframework.batch.item.ItemStreamException;
import org.springframework.batch.item.NonTransientResourceException;
import org.springframework.batch.item.ParseException;
import org.springframework.batch.item.UnexpectedInputException;
import org.springframework.batch.item.file.FlatFileItemReader;
import org.springframework.batch.item.file.transform.FieldSet;

import sopra.springbatch.training1.dto.CustomerDTO;

/**
 * Lecture multiligne
 */
public class MultiLineReader implements ItemReader<CustomerDTO>, ItemStream  {

	/** Lecture déléguée à FlatFileItemReader */
	private FlatFileItemReader<FieldSet> delegate;
	
	/**
	 * Surcharge de la méthode de FlatFileItemReader 
	 */
	@Override
	protected CustomerDTO doRead() throws Exception {
		CustomerDTO customerDTO;
		
		for (String ligne = super.read() ; 
				ligne != "BEGIN" ;
				ligne = super.read()){
			
		}
		
		
		return super.doRead();
	}

	@Override
	public void close() throws ItemStreamException {
		delegate.close();		
	}

	@Override
	public void open(ExecutionContext executionContext) throws ItemStreamException {
		delegate.open(executionContext);
	}

	@Override
	public void update(ExecutionContext arg0) throws ItemStreamException {
		delegate.update(executionContext)		
	}

	@Override
	public CustomerDTO read() throws Exception, UnexpectedInputException,
			ParseException, NonTransientResourceException {
		// TODO Auto-generated method stub
		return null;
	}
}
